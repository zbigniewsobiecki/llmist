---
title: Debugging
description: Capture raw prompts and troubleshoot issues
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Capture raw prompts, responses, and troubleshoot issues.

## Quick Debug with Presets

```typescript
import { HookPresets } from 'llmist';

// Full monitoring
.withHooks(HookPresets.monitoring({ verbose: true }))

// Specific debugging
.withHooks(HookPresets.logging({ verbose: true }))
.withHooks(HookPresets.errorLogging())
.withHooks(HookPresets.timing())
```

| Symptom | Recommended Preset |
|---------|-------------------|
| Agent not responding | `monitoring()` |
| Unexpected behavior | `logging({ verbose: true })` |
| High costs | `tokenTracking()` |
| Errors/crashes | `errorLogging()` |
| Slow performance | `timing()` |

## Capture Raw Requests

```typescript
.withHooks({
  observers: {
    onLLMCallStart: async (ctx) => {
      console.log('Model:', ctx.options.model);
      console.log('Messages:', ctx.options.messages);
    },
    onLLMCallComplete: async (ctx) => {
      console.log('Response:', ctx.rawResponse);
      console.log('Tokens:', ctx.usage);
    },
  },
})
```

## Debug Gadget Execution

```typescript
.withHooks({
  observers: {
    onGadgetExecutionStart: async (ctx) => {
      console.log(`[${ctx.gadgetName}] Starting`);
      console.log('Parameters:', ctx.parameters);
    },
    onGadgetExecutionComplete: async (ctx) => {
      console.log(`[${ctx.gadgetName}] ${ctx.executionTimeMs}ms`);
      if (ctx.error) console.error('Error:', ctx.error);
    },
  },
})
```

## Custom Logger

For detailed logger configuration, see [Logging Reference](/reference/logging/).

```typescript
import { createLogger } from 'llmist';

const logger = createLogger({ minLevel: 'debug' });
.withLogger(logger)
```

## CLI Debugging

```bash
    npx @llmist/cli complete "test" --model haiku 2>&1 | tee debug.log
    npx @llmist/cli agent "test" --gadget ./tool.ts 2>&1
    ```

## See Also

- [Hooks Guide](/library/guides/hooks/) - All hook types
- [Troubleshooting](/library/reference/troubleshooting/) - Common issues
