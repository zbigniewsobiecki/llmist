---
title: CLI Gadgets
description: Write gadgets for use with llmist agent
sidebar:
  order: 1
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

Write gadgets (tools) for use with `llmist agent`.

<Aside type="tip">
  For detailed gadget patterns and examples, see [Creating Gadgets](/library/guides/creating-gadgets/) and [Gadget Examples](/reference/gadget-examples/).
</Aside>

## Quick Start

Create a file with a gadget class:

```typescript title="calculator.ts"
import { Gadget, z } from 'llmist';

export class Calculator extends Gadget({
  description: 'Performs arithmetic',
  schema: z.object({
    a: z.number(),
    b: z.number(),
    op: z.enum(['add', 'subtract', 'multiply', 'divide']),
  }),
}) {
  execute(params: this['params']): string {
    const { a, b, op } = params;
    switch (op) {
      case 'add': return String(a + b);
      case 'subtract': return String(a - b);
      case 'multiply': return String(a * b);
      case 'divide': return String(a / b);
    }
  }
}
```

Use it:

```bash
llmist agent "What is 15 * 23?" --gadget ./calculator.ts
```

## File Requirements

Gadget files must:
1. Export one or more gadget classes
2. Use TypeScript or JavaScript
3. Be a valid ES module

```typescript
// Multiple exports work
export class Calculator extends Gadget({ ... }) { ... }
export class Weather extends Gadget({ ... }) { ... }

// Default exports work too
export default class MyGadget extends Gadget({ ... }) { ... }
```

## Loading Multiple Gadgets

<Tabs>
  <TabItem label="Multiple Files">
    ```bash
    llmist agent "Calculate and get weather" \
      --gadget ./calculator.ts \
      --gadget ./weather.ts
    ```
  </TabItem>
  <TabItem label="Single File">
    ```typescript title="tools.ts"
    export class Calculator extends Gadget({ ... }) { ... }
    export class Weather extends Gadget({ ... }) { ... }
    ```
    ```bash
    llmist agent "Calculate and get weather" --gadget ./tools.ts
    ```
  </TabItem>
</Tabs>

## External Gadgets

Load gadgets from npm packages or git repositories:

```bash
# npm package (Dhalsim browser automation)
llmist agent "Navigate to apple.com" -g dhalsim

# Use a preset
llmist agent "Browse the web" -g dhalsim:minimal

# git URL
llmist agent "task" -g git+https://github.com/user/repo.git

# Combine sources
llmist agent "Complex task" \
  -g ./local-gadget.ts \
  -g dhalsim:minimal \
  -g builtin:ReadFile
```

See [Gadget Ecosystem](/cli/gadgets/external-gadgets/) for detailed documentation on Dhalsim, presets, and creating your own packages.

## Testing Gadgets

Use the `gadget` command to test in isolation:

```bash
# Run interactively
llmist gadget run ./calculator.ts

# View gadget info
llmist gadget info ./calculator.ts

# Validate structure
llmist gadget validate ./calculator.ts

# Pipe JSON input
echo '{"a": 5, "b": 3, "op": "add"}' | llmist gadget run ./calculator.ts
```

## Creating External Packages

Add an `llmist` field to `package.json`:

```json
{
  "name": "my-gadgets",
  "llmist": {
    "gadgets": "./dist/index.js",
    "presets": {
      "all": "*",
      "minimal": ["GadgetA", "GadgetB"]
    }
  }
}
```

## See Also

- [Creating Gadgets](/library/guides/creating-gadgets/) - Comprehensive gadget development guide
- [Gadget Examples](/reference/gadget-examples/) - Common gadget patterns
- [Gadget Ecosystem](/cli/gadgets/external-gadgets/) - Third-party gadgets and packages
- [CLI Configuration](/cli/configuration/toml-reference/) - Gadget approval settings
- [Testing Gadgets](/testing/gadgets/) - Unit testing gadgets
