---
title: CLI Gadgets
description: Write gadgets for use with llmist agent
sidebar:
  order: 1
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

Write gadgets (tools) for use with `llmist agent`.

<Aside type="tip">
  For detailed gadget patterns and examples, see [Creating Gadgets](/library/guides/creating-gadgets/) and [Gadget Examples](/reference/gadget-examples/).
</Aside>

## Quick Start

Create a file with a gadget class:

```typescript title="floppy.ts"
import { Gadget, z } from 'llmist';

export class FloppyDisk extends Gadget({
  description: 'Calculate how many 1.44MB floppy disks are needed',
  schema: z.object({
    filename: z.string(),
    megabytes: z.number().positive(),
  }),
}) {
  execute(params: this['params']): string {
    const { filename, megabytes } = params;
    const disks = Math.ceil(megabytes / 1.44);
    return `${filename} requires ${disks} floppy disk(s). Label them 1/${disks}, 2/${disks}...`;
  }
}
```

Use it:

```bash
    npx @llmist/cli agent "How many floppies for DOOM.ZIP at 50MB?" --gadget ./floppy.ts
    ```

## File Requirements

Gadget files must:
1. Export one or more gadget classes
2. Use TypeScript or JavaScript
3. Be a valid ES module

```typescript
// Multiple exports work
export class FloppyDisk extends Gadget({ ... }) { ... }
export class DialUpModem extends Gadget({ ... }) { ... }

// Default exports work too
export default class ArcadeHighScore extends Gadget({ ... }) { ... }
```

## Loading Multiple Gadgets

```bash
    # Multiple files
    npx @llmist/cli agent "Calculate floppies and connect to BBS" \
      --gadget ./floppy.ts \
      --gadget ./dialup.ts

    # Single file with multiple exports
    npx @llmist/cli agent "Calculate floppies and dial up" --gadget ./retro-tools.ts
    ```

## Loading Specific Gadgets

Load a specific gadget from a file or package using the appropriate suffix:

```bash
    # Load only FloppyDisk from a file with multiple exports (colon separator)
    npx @llmist/cli agent "Calculate floppies" --gadget ./retro-tools.ts:FloppyDisk

    # Load BrowseWeb subagent from npm package (slash separator)
    npx @llmist/cli agent "Browse apple.com" -g dhalsim/BrowseWeb

    # Load from scoped npm package
    npx @llmist/cli agent "task" -g @myorg/my-gadgets/MyGadget

    # Load from git URL (slash separator)
    npx @llmist/cli agent "task" -g git+https://github.com/user/repo#main/MyGadget
    ```

<Aside type="note">
  The gadget name must be PascalCase (e.g., `MyGadget`, `BrowseWeb`). Local file paths use a **colon** separator (`:GadgetName`) to avoid ambiguity with filesystem paths, while npm packages and git URLs use a **slash** separator (`/GadgetName`).
</Aside>

## External Gadgets

Load gadgets from npm packages or git repositories:

```bash
    # npm package (Dhalsim browser automation)
    npx @llmist/cli agent "Navigate to apple.com" -g dhalsim

    # Use a preset
    npx @llmist/cli agent "Browse the web" -g dhalsim:minimal

    # Load specific gadget from package
    npx @llmist/cli agent "Browse the web" -g dhalsim/BrowseWeb

    # git URL
    npx @llmist/cli agent "task" -g git+https://github.com/user/repo.git

    # git URL with specific gadget
    npx @llmist/cli agent "task" -g git+https://github.com/user/repo.git#main/MyGadget

    # Combine sources
    npx @llmist/cli agent "Complex task" \
      -g ./local-gadget.ts \
      -g dhalsim/BrowseWeb \
      -g builtin:ReadFile
    ```

See [Gadget Ecosystem](/cli/gadgets/external-gadgets/) for detailed documentation on Dhalsim, presets, and creating your own packages.

## Testing Gadgets

Use the `gadget` command to test in isolation:

```bash
    # Run interactively
    npx @llmist/cli gadget run ./floppy.ts

    # View gadget info
    npx @llmist/cli gadget info ./floppy.ts

    # Validate structure
    npx @llmist/cli gadget validate ./floppy.ts

    # Pipe JSON input
    echo '{"filename": "DOOM.ZIP", "megabytes": 50}' | npx @llmist/cli gadget run ./floppy.ts
    ```

## Creating External Packages

Add an `llmist` field to `package.json`:

```json
{
  "name": "my-gadgets",
  "llmist": {
    "gadgets": "./dist/index.js",
    "presets": {
      "all": "*",
      "minimal": ["GadgetA", "GadgetB"]
    }
  }
}
```

## See Also

- [Creating Gadgets](/library/guides/creating-gadgets/) - Comprehensive gadget development guide
- [Gadget Examples](/reference/gadget-examples/) - Common gadget patterns
- [Gadget Ecosystem](/cli/gadgets/external-gadgets/) - Third-party gadgets and packages
- [CLI Configuration](/cli/configuration/toml-reference/) - Gadget approval settings
- [Testing Gadgets](/testing/gadgets/) - Unit testing gadgets
